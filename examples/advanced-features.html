<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TableCrafter.js - Advanced Features Demo</title>
    <link rel="stylesheet" href="../src/tablecrafter.css">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            margin-bottom: 10px;
        }
        .subtitle {
            color: #666;
            margin-bottom: 30px;
        }
        .demo-section {
            margin-bottom: 40px;
        }
        .demo-section h2 {
            color: #2c3e50;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }
        .config-example {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 15px;
            margin: 20px 0;
            font-family: 'Monaco', 'Consolas', monospace;
            font-size: 14px;
            overflow-x: auto;
        }
        .feature-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .feature-card {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #3498db;
        }
        .feature-card h3 {
            margin-top: 0;
            color: #2c3e50;
        }
        .status-badge {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: bold;
            color: white;
            background: #27ae60;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>TableCrafter.js - Advanced Features Demo</h1>
        <p class="subtitle">
            Demonstrating all advanced features translated from the WordPress Gravity Tables plugin.
            <span class="status-badge">All Features Implemented ‚úì</span>
        </p>

        <div class="demo-section">
            <h2>üéØ Feature Overview</h2>
            <div class="feature-list">
                <div class="feature-card">
                    <h3>üîç Advanced Filtering</h3>
                    <ul>
                        <li>Multi-select dropdowns</li>
                        <li>Date range filters</li>
                        <li>Number range filters</li>
                        <li>Auto-type detection</li>
                    </ul>
                </div>
                <div class="feature-card">
                    <h3>üì± Enhanced Mobile</h3>
                    <ul>
                        <li>Expandable card layout</li>
                        <li>Field visibility per breakpoint</li>
                        <li>Touch-optimized interactions</li>
                        <li>Two-tier content display</li>
                    </ul>
                </div>
                <div class="feature-card">
                    <h3>‚ö° Bulk Operations</h3>
                    <ul>
                        <li>Multi-row selection</li>
                        <li>Bulk delete/export/edit</li>
                        <li>Progress indicators</li>
                        <li>Custom bulk actions</li>
                    </ul>
                </div>
                <div class="feature-card">
                    <h3>üîó Lookup Fields</h3>
                    <ul>
                        <li>Dynamic dropdown editing</li>
                        <li>API data loading</li>
                        <li>Cached lookup data</li>
                        <li>User/role filtering</li>
                    </ul>
                </div>
                <div class="feature-card">
                    <h3>üõ°Ô∏è Permission System</h3>
                    <ul>
                        <li>Role-based access</li>
                        <li>Field-level permissions</li>
                        <li>Own-only restrictions</li>
                        <li>Action-based controls</li>
                    </ul>
                </div>
                <div class="feature-card">
                    <h3>üåê API Integration</h3>
                    <ul>
                        <li>CRUD operations</li>
                        <li>Authentication support</li>
                        <li>Error handling</li>
                        <li>Framework agnostic</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="demo-section">
            <h2>üìä Live Demo Table</h2>
            <div id="advanced-table"></div>
        </div>

        <div class="demo-section">
            <h2>‚öôÔ∏è Configuration Example</h2>
            <div class="config-example">
const table = new TableCrafter('#advanced-table', {
    data: sampleData,
    columns: [
        { field: 'id', label: 'ID' },
        { field: 'name', label: 'Name', editable: true },
        { field: 'email', label: 'Email', editable: true },
        { 
            field: 'department', 
            label: 'Department',
            editable: true,
            lookup: {
                type: 'departments',
                url: '/api/departments',
                valueField: 'id',
                displayField: 'name'
            }
        },
        { 
            field: 'manager_id', 
            label: 'Manager',
            lookup: {
                type: 'users',
                url: '/api/users',
                valueField: 'id',
                displayField: 'name',
                filter: { role: 'manager' }
            }
        },
        { field: 'salary', label: 'Salary' },
        { field: 'hire_date', label: 'Hire Date' },
        { field: 'status', label: 'Status' }
    ],
    
    // Advanced filtering with auto-detection
    filters: {
        advanced: true,
        autoDetect: true,
        showClearAll: true,
        types: {
            'department': { type: 'multiselect' },
            'salary': { type: 'numberrange' },
            'hire_date': { type: 'daterange' }
        }
    },
    
    // Bulk operations
    bulk: {
        enabled: true,
        operations: ['delete', 'export', 'edit'],
        showProgress: true
    },
    
    // Enhanced responsive design
    responsive: {
        enabled: true,
        breakpoints: {
            mobile: { width: 480, layout: 'cards' },
            tablet: { width: 768, layout: 'compact' },
            desktop: { width: 1024, layout: 'table' }
        },
        fieldVisibility: {
            mobile: {
                showFields: ['name', 'department', 'status'],
                hideFields: ['id', 'salary', 'hire_date']
            },
            tablet: {
                showFields: ['name', 'email', 'department', 'status']
            }
        }
    },
    
    // Add new entries
    addNew: {
        enabled: true,
        modal: true,
        fields: [
            { name: 'name', label: 'Full Name', type: 'text', required: true },
            { name: 'email', label: 'Email', type: 'email', required: true },
            { name: 'department', label: 'Department', type: 'select', required: true }
        ],
        validation: {
            name: { required: true, minLength: 2 },
            email: { required: true, type: 'email' }
        }
    },
    
    // API integration
    api: {
        baseUrl: '/api/employees',
        endpoints: {
            data: '/list',
            create: '/create',
            update: '/update',
            delete: '/delete',
            lookup: '/lookup'
        },
        headers: {
            'X-API-Key': 'your-api-key'
        },
        authentication: {
            type: 'bearer',
            token: 'your-jwt-token'
        }
    },
    
    // Permission system
    permissions: {
        enabled: true,
        view: ['admin', 'manager', 'employee'],
        edit: ['admin', 'manager'],
        delete: ['admin'],
        create: ['admin', 'manager'],
        ownOnly: false
    },
    
    // State persistence
    state: {
        persist: true,
        storage: 'localStorage',
        key: 'employee_table_state'
    },
    
    // Event callbacks
    onEdit: function(event) {
        console.log('Edit:', event);
    },
    onBulkAction: function(event) {
        console.log('Bulk action:', event);
    },
    onFilter: function(event) {
        console.log('Filter:', event);
    }
});

// Set current user context for permissions
table.setCurrentUser({
    id: 1,
    name: 'John Admin',
    roles: ['admin', 'manager']
});

table.render();
            </div>
        </div>

        <div class="demo-section">
            <h2>üöÄ Key Advantages Over WordPress Plugin</h2>
            <ul>
                <li><strong>Framework Agnostic:</strong> Works with React, Vue, Angular, or vanilla HTML</li>
                <li><strong>Zero Dependencies:</strong> No external libraries required</li>
                <li><strong>Better Performance:</strong> Client-side processing with efficient rendering</li>
                <li><strong>Mobile First:</strong> Advanced responsive design with touch optimization</li>
                <li><strong>Modern Architecture:</strong> ES6+ with async/await and modern web standards</li>
                <li><strong>API Ready:</strong> RESTful API integration with authentication support</li>
                <li><strong>Extensible:</strong> Plugin system for custom functionality</li>
                <li><strong>Production Ready:</strong> Comprehensive error handling and validation</li>
            </ul>
        </div>
    </div>

    <script src="../src/tablecrafter.js"></script>
    <script>
        // Sample data for demonstration
        const sampleData = [
            {
                id: 1,
                name: 'John Smith',
                email: 'john@company.com',
                department: 'Engineering',
                manager_id: 5,
                salary: 85000,
                hire_date: '2022-01-15',
                status: 'Active'
            },
            {
                id: 2,
                name: 'Sarah Johnson',
                email: 'sarah@company.com',
                department: 'Marketing',
                manager_id: 6,
                salary: 72000,
                hire_date: '2021-08-20',
                status: 'Active'
            },
            {
                id: 3,
                name: 'Mike Chen',
                email: 'mike@company.com',
                department: 'Engineering',
                manager_id: 5,
                salary: 78000,
                hire_date: '2023-03-10',
                status: 'Active'
            },
            {
                id: 4,
                name: 'Emily Davis',
                email: 'emily@company.com',
                department: 'Sales',
                manager_id: 7,
                salary: 68000,
                hire_date: '2022-11-05',
                status: 'On Leave'
            },
            {
                id: 5,
                name: 'David Wilson',
                email: 'david@company.com',
                department: 'Engineering',
                manager_id: null,
                salary: 120000,
                hire_date: '2020-05-12',
                status: 'Active'
            },
            {
                id: 6,
                name: 'Lisa Brown',
                email: 'lisa@company.com',
                department: 'Marketing',
                manager_id: null,
                salary: 95000,
                hire_date: '2019-09-30',
                status: 'Active'
            },
            {
                id: 7,
                name: 'Robert Taylor',
                email: 'robert@company.com',
                department: 'Sales',
                manager_id: null,
                salary: 110000,
                hire_date: '2021-02-18',
                status: 'Active'
            },
            {
                id: 8,
                name: 'Amanda White',
                email: 'amanda@company.com',
                department: 'HR',
                manager_id: null,
                salary: 75000,
                hire_date: '2022-06-08',
                status: 'Active'
            }
        ];

        // Initialize the advanced table
        const table = new TableCrafter('#advanced-table', {
            data: sampleData,
            columns: [
                { field: 'id', label: 'ID' },
                { field: 'name', label: 'Name', editable: true },
                { field: 'email', label: 'Email', editable: true },
                { field: 'department', label: 'Department' },
                { field: 'salary', label: 'Salary' },
                { field: 'hire_date', label: 'Hire Date' },
                { field: 'status', label: 'Status', editable: true }
            ],
            
            editable: true,
            pagination: true,
            pageSize: 5,
            sortable: true,
            filterable: true,
            exportable: true,
            
            // Advanced filtering
            filters: {
                advanced: true,
                autoDetect: true,
                showClearAll: true
            },
            
            // Bulk operations
            bulk: {
                enabled: true,
                operations: ['delete', 'export']
            },
            
            // Enhanced responsive design
            responsive: {
                enabled: true,
                fieldVisibility: {
                    mobile: {
                        showFields: ['name', 'department', 'status'],
                        hideFields: ['id', 'email', 'salary', 'hire_date']
                    }
                }
            },
            
            // Add new entries
            addNew: {
                enabled: true,
                modal: true,
                fields: [
                    { name: 'name', label: 'Full Name', type: 'text', required: true },
                    { name: 'email', label: 'Email', type: 'email', required: true },
                    { name: 'department', label: 'Department', type: 'text', required: true },
                    { name: 'status', label: 'Status', type: 'text', required: true }
                ],
                validation: {
                    name: { required: true, minLength: 2 },
                    email: { required: true, type: 'email' }
                }
            },
            
            // State persistence
            state: {
                persist: true,
                storage: 'localStorage',
                key: 'advanced_demo_table'
            },
            
            // Event callbacks
            onEdit: function(event) {
                console.log('Edit event:', event);
            },
            onBulkAction: function(event) {
                console.log('Bulk action:', event);
                alert(`Performed ${event.action} on ${event.selectedRows.length} items`);
            },
            onAdd: function(event) {
                console.log('Add event:', event);
                alert('New entry added successfully!');
            },
            onFilter: function(event) {
                console.log('Filter event:', event);
            }
        });

        // Simulate user context (in real app, this would come from authentication)
        table.setCurrentUser({
            id: 1,
            name: 'Demo User',
            roles: ['admin']
        });

        table.render();
    </script>
</body>
</html>